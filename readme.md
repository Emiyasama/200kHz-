# 超声波测距系统
最新方案程序见：【1输入捕获高电平超声波测距代码_未测试】文件夹;

最新更新方案如下：

+ 发射部分：

        通过DDS发出200k正弦波或方波，经过硬件放大后输入超声波发射探头；

+ 接收部分：
        
        超声波接收探头信号经过硬件放大后进入比较器，若超过设置的阈值，则为1；1时指接收到超声波信号；

+ 输出控制波形：

        通过PB0引脚输出控制波形：当发出DDS波形时，此引脚输出1，关闭DDS时此引脚输出0；

+ 硬件处理输入捕获的信号：

        超声波接收端的比较器后连接非门，再与PB0相与，其结果输入PA6（输入捕获引脚）

+ 输入捕获高电平时间：

        通过输入捕获引脚PA6检测信号高电平时间，得到的即为超声波传播的时间；

+ 温度传感器测温：

        通过温度传感器检测温度，而超声波传播速度v=331.5+0.6*t;

+ 测出的距离：

        距离 = 时间*速度/2; //注意单位换算就好了

+ OLED显示：

        第一行显示传播时间us；第二行显示当前温度值；第三行显示距离，单位um;

+ 串口显示：

        会打印传播时间(us)、传播速度(m/s)、传播距离(m和cm)

</br>

# 引脚对应表

1、DDS：

        FQUD ———— PA8
        WCLK ———— PA9
        RST  ———— PA10

2、比较器阈值电压

        3.3V — 电阻 — 比较器负端

3、输出控制波形：

        PB0 ———— 与门输入

4、温度传感器

        I2C_SCL ———— PB6
        I2C_SDA ———— PB7

5、输入捕获引脚

        PA6 ———— 与门输出

6、硬件连接

        接收探头 ———— 放大PCB ———— 比较器正端 ———— 非门 ———— 与门输入